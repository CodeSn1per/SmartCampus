<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.codesniper.smartcampus.dao.UserDao">
    <resultMap type="com.codesniper.smartcampus.entity.User" id="UserMap">
        <result property="id" column="ID" jdbcType="VARCHAR"/>
        <result property="userId" column="USER_ID" jdbcType="INTEGER"/>
        <result property="username" column="USERNAME" jdbcType="VARCHAR"/>
        <result property="password" column="PASSWORD" jdbcType="VARCHAR"/>
    </resultMap>

    <select id="getUserInfoByUsername" resultType="com.codesniper.smartcampus.entity.User">
        SELECT ID, USER_ID, USERNAME, PASSWORD, ENABLED
        FROM T_USER
        WHERE ENABLED = true
          AND USERNAME = #{username}
    </select>

    <insert id="addUserInfo" parameterType="com.codesniper.smartcampus.entity.User">
        INSERT INTO T_USER
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id!=null and id!=''">
                ID,
            </if>
            <if test="userId!=null and userId!=''">
                USER_ID,
            </if>
            <if test="username!=null and username!=''">
                USERNAME,
            </if>
            <if test="password!=null and password!=''">
                PASSWORD,
            </if>
            <if test="enabled!=null and enabled!=''">
                ENABLED
            </if>
        </trim>
        VALUES
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id!=null and id!=''">
                #{id},
            </if>
            <if test="userId!=null and userId!=''">
                #{userId},
            </if>
            <if test="username!=null and username!=''">
                #{username},
            </if>
            <if test="password!=null and password!=''">
                #{password},
            </if>
            <if test="enabled!=null and enabled!=''">
                #{enabled}
            </if>
        </trim>
    </insert>

    <update id="editUserInfo" parameterType="com.codesniper.smartcampus.entity.User">
        UPDATE T_USER
        SET USERNAME=#{username},
            PASSWORD=#{password},
            ENABLED=#{enabled}
        WHERE USER_ID = #{userId}
    </update>

</mapper>

