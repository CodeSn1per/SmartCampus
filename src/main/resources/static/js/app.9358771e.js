(function(e){function t(t){for(var r,a,c=t[0],i=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);f&&f(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o={app:0},s=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-0c0585ba":"1af0abd7","chunk-3089d1f4":"4a40d97d","chunk-3f45255d":"0e5471f1","chunk-417a984b":"0a5e8dd3","chunk-479c85fa":"2e9cac9a","chunk-5f5bf5a0":"673ba015","chunk-b3eebed4":"424227b8","chunk-cfe4f326":"5bae2dad","chunk-d2cd23c4":"eb39645a","chunk-e2176614":"5f3d6da9"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-0c0585ba":1,"chunk-3089d1f4":1,"chunk-3f45255d":1,"chunk-417a984b":1,"chunk-479c85fa":1,"chunk-5f5bf5a0":1,"chunk-b3eebed4":1,"chunk-cfe4f326":1,"chunk-d2cd23c4":1,"chunk-e2176614":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0c0585ba":"73c01343","chunk-3089d1f4":"b7f40b88","chunk-3f45255d":"d132e28c","chunk-417a984b":"8fb655bc","chunk-479c85fa":"f1300d46","chunk-5f5bf5a0":"82978742","chunk-b3eebed4":"7678c99c","chunk-cfe4f326":"c888b5bb","chunk-d2cd23c4":"ba5bd1c7","chunk-e2176614":"744c409c"}[e]+".css",o=i.p+r,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=s[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[e],f.parentNode.removeChild(f),n(s)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("9085")},"0627":function(e,t,n){"use strict";n("6aee")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("e9c4");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],s={name:"App"},c=s,i=(n("034f"),n("2877")),u=Object(i["a"])(c,a,o,!1,null,null,null),l=u.exports,d=n("a18c"),f=n("5c96"),p=n.n(f),m=(n("0fae"),n("b775"));n("7f10");r["default"].config.productionTip=!1,r["default"].use(p.a),d["a"].beforeEach((function(e,t,n){if(window.sessionStorage.getItem("tokenStr")){if(!window.sessionStorage.getItem("user"))return Object(m["a"])("/getUserInfo").then((function(e){e&&(window.sessionStorage.setItem("user",JSON.stringify(e)),n())}));n()}else"/"===e.path?n():n("/?redirect="+e.path)})),new r["default"]({router:d["a"],render:function(e){return e(l)}}).$mount("#app")},"6aee":function(e,t,n){},9085:function(e,t,n){},a18c:function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0");var r=n("2b0e"),a=n("8c4f"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-div"},[n("el-form",{ref:"form",staticClass:"formStyle",attrs:{rules:e.rules,model:e.loginForm}},[n("h3",{staticClass:"loginTitle"},[e._v("系统登录")]),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{staticStyle:{width:"240px"},attrs:{type:"text","auto-complete":"false",placeholder:"点击图片更换验证码"},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}}),n("img",{staticStyle:{"margin-left":"10px"},attrs:{src:e.captchaUrl,width:"100px",height:"39px"},on:{click:e.updateCaptcha}})],1),n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("登录")])],1)],1)},s=[],c=(n("ac1f"),n("5319"),n("b775")),i=(n("5c96"),{name:"Login",data:function(){return{captchaUrl:"/captcha?time="+new Date,loginForm:{username:"",password:"",code:""},checked:!0,loading:!1,rules:{username:[{required:!0,message:"用户名不为空",trigger:"blur"},{min:3,max:10,message:"长度在 3 ~ 10个字符",trigger:"blur"}],password:[{required:!0,message:"密码不为空",trigger:"blur"},{min:3,max:10,message:"长度在 3 ~ 10个字符",trigger:"blur"}],code:[{required:!0,message:"验证码不为空",trigger:"blur"}]}}},methods:{updateCaptcha:function(){this.captchaUrl="/captcha?time="+new Date},submitForm:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$message.error("请输入所有字段"),!1;Object(c["a"])("/login",e.loginForm).then((function(t){if(t.data){var n=t.data.tokenHead+t.data.token;window.sessionStorage.setItem("tokenStr",n);var r=e.$route.query.redirect;e.$router.replace("/"===r||void 0===r?"/firstPicture":r),e.$notify({title:"成功",message:t.message,type:"success"})}else e.$notify.error({title:"错误",message:t.message})}))}))}}}),u=i,l=(n("d6db"),n("2877")),d=Object(l["a"])(u,o,s,!1,null,null,null),f=d.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-header",{staticClass:"homeHeader"},[n("div",{staticClass:"title"},[e._v("疫情期间进出校园管理系统")]),n("div",[n("el-button",{staticClass:"userInfo",attrs:{disabled:"",type:"text"}},[n("i",{staticClass:"fa fa-user"}),e._v(" : "+e._s(e.userInfo.username+" ("+e.userInfo.name+")")+" ")]),n("el-button",{staticClass:"logout",attrs:{type:"text"},on:{click:e.logout}},[n("i",{staticClass:"fa fa-power-off",staticStyle:{color:"firebrick"}})])],1)]),n("el-container",[n("el-aside",{staticClass:"homeAside",attrs:{width:"200px"}},[n("el-menu",{staticStyle:{"background-color":"#3a566b"},attrs:{router:""}},e._l(e.menus,(function(t,r){return n("el-menu-item",{key:r,staticStyle:{"padding-right":"0"},attrs:{index:t.path}},[n("i",{class:t.icon}),n("span",{staticClass:"menuTitle",attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])})),1)],1),n("el-main",{staticClass:"main-div"},[n("router-view")],1)],1)],1)],1)},m=[],h={name:"Home",created:function(){this.getMenu(),this.getUserInfo()},data:function(){return{menus:[],userInfo:{}}},methods:{getMenu:function(){var e=this;Object(c["a"])("/menu/getMenusByUserId").then((function(t){e.menus=t.data}))},getUserInfo:function(){this.userInfo=JSON.parse(window.sessionStorage.getItem("user")).data,console.log(this.userInfo)},logout:function(){var e=this;this.$confirm("你将注销该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["a"])("/logout").then((function(t){sessionStorage.clear(),e.$router.push("/"),t&&e.$notify({title:"成功",message:"注销成功",type:"success"})})).catch((function(){e.$notify.info({title:"消息",message:"已取消"})}))}))}}},g=h,b=(n("0627"),Object(l["a"])(g,p,m,!1,null,"e08a0b8a",null)),k=b.exports;r["default"].use(a["a"]);var v=[{path:"/",name:"Login",component:f},{path:"/home",name:"Home",component:k,children:[{path:"/firstPicture",name:"FirstPicture",meta:{title:"首图"},component:function(){return n.e("chunk-d2cd23c4").then(n.bind(null,"5f43"))}},{path:"/personal",name:"PersonalInfo",meta:{title:"个人信息"},component:function(){return n.e("chunk-e2176614").then(n.bind(null,"25ce"))}},{path:"/apply",name:"ApplyInfo",meta:{title:"我要申请"},component:function(){return n.e("chunk-3089d1f4").then(n.bind(null,"d747"))}},{path:"/applyRecord",name:"ApplyRecord",meta:{title:"申请记录"},component:function(){return n.e("chunk-b3eebed4").then(n.bind(null,"612e"))}},{path:"/approvalRecord",name:"ApprovalRecord",meta:{title:"审批记录"},component:function(){return n.e("chunk-3f45255d").then(n.bind(null,"0354"))}},{path:"/pending",name:"Pending",meta:{title:"待审批"},component:function(){return n.e("chunk-5f5bf5a0").then(n.bind(null,"3968"))}},{path:"/riskArea",name:"RiskArea",meta:{title:"风险地区"},component:function(){return n.e("chunk-417a984b").then(n.bind(null,"86a2"))}},{path:"/student",name:"StudentManage",meta:{title:"学生管理"},component:function(){return n.e("chunk-cfe4f326").then(n.bind(null,"8e4d"))}},{path:"/health",name:"HealthSituation",meta:{title:"健康状况"},component:function(){return n.e("chunk-0c0585ba").then(n.bind(null,"762d"))}},{path:"/healthManage",name:"HealthManage",meta:{title:"健康管理"},component:function(){return n.e("chunk-479c85fa").then(n.bind(null,"3656"))}}]}],y=new a["a"]({routes:v});t["a"]=y},b775:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("ac1f"),n("5319");var r=n("bc3a"),a=n.n(r),o=n("5c96"),s=n("a18c");a.a.interceptors.request.use((function(e){return window.sessionStorage.getItem("tokenStr")&&(e.headers["Authorization"]=window.sessionStorage.getItem("tokenStr")),e}),(function(e){console.log(e)})),a.a.interceptors.response.use((function(e){if(!e.status||200!==e.status||500!==e.data.code&&401!==e.data.code&&403!==e.data.code)return e.data;o["Message"].error({message:e.data.message})}),(function(e){504===e.response.code||404===e.response.code?o["Message"].error({message:"服务器无法访问"}):403===e.response.code?o["Message"].error({message:"权限不足"}):401===e.response.code?(o["Message"].error({message:"尚未登录,请登录"}),s["a"].replace("/")):e.response.data.message?o["Message"].error({message:e.response.data.message}):o["Message"].error({message:"未知错误"})}));var c="",i=function(e,t){return a()({method:"post",url:"".concat(c).concat(e),params:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}},b9b4:function(e,t,n){},d6db:function(e,t,n){"use strict";n("b9b4")}});
//# sourceMappingURL=app.9358771e.js.map